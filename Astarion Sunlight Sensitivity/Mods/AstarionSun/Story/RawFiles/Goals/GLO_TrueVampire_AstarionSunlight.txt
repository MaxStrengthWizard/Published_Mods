Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
PROC
PROC_CRA_WakeupDone()
AND
DB_Avatars((CHARACTER)S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity", 0)
AND
QRY_OnlyOnce("ORI_Astarion_TrueSpawnVampire_Sunlight")
THEN
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity");

IF
FlagSet((FLAG)ORI_Astarion_Event_UnlockVampireBite_a887e372-d8a1-430f-809f-b0c7169920eb, _, _)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity", 0)
AND
QRY_OnlyOnce("ORI_Astarion_TrueSpawnVampire_Sunlight")
THEN
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity");

IF
FlagSet((FLAG)ORI_Astarion_Knows_Vampireness_43c71ab0-1aca-484a-950d-54106ae46da5, _, _)
AND
NOT DB_Avatars((CHARACTER)S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity", 0)
AND
QRY_OnlyOnce("ORI_Astarion_TrueSpawnVampire_Sunlight")
THEN
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SunlightSensitivity");

IF
LevelGameplayReady(_LevelName, _IsEditor)
AND
IsGameLevel(_LevelName, 1)
AND
QRY_OnlyOnce_IsSet("ORI_Astarion_TrueSpawnVampire_Sunlight")
THEN
GoalCompleted;

EXITSECTION

ENDEXITSECTION
ParentTargetEdge "ModWrapper_Gustav"
