Version 1
SubGoalCombiner SGC_AND
INITSECTION
PROC_TrueVampire_AscendantCheck();

KBSECTION
PROC
PROC_TrueVampire_AscendantCheck()
AND
DB_GlobalFlag((FLAG)ORI_Astarion_State_BecameVampireLord_c446ce94-efd8-45d5-b407-284177b6b57e)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "LOW_Astarion_VampireAscendant", 1)
AND
HasActiveStatus(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "ORI_ASTARION_ASCENDANT_TECHNICAL", 0)
THEN
ApplyStatus(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "ORI_ASTARION_ASCENDANT_TECHNICAL", -1.0);

PROC
PROC_TrueVampire_AscendantCheck()
AND
DB_GlobalFlag((FLAG)ORI_Astarion_State_BecameVampireLord_c446ce94-efd8-45d5-b407-284177b6b57e)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "LOW_Astarion_VampireAscendant", 1)
AND
HasActiveStatus(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "ORI_ASTARION_ASCENDANT_TECHNICAL", 1)
AND
HasPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantOPSavingThrows", 0)
THEN
RemovePassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "VampiricResistance");
RemovePassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantSavingThrows");
RemovePassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantSkillProficiencies");
RemovePassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "SuperiorDarkvision");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantImmunities");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantOPSavingThrows");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantOPSkillProficiencies");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantBlindsight");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantOPNaturalArmor");
AddPassive(S_Player_Astarion_c7c13742-bacd-460a-8f65-f864fe41f255, "AscendantOPMovementBuff");

EXITSECTION

ENDEXITSECTION
